<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AC-JSONS Explorer</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #f0f0f0; }
    h1 { color: #222; }
    ul { list-style: none; padding-left: 0; }
    li { margin-bottom: 10px; }
    a { color: #007bff; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h1>üìÅ AC-JSONS Explorer</h1>
  <ul id="file-list">Loading files...</ul>

  <script>
    const user = "star-destroyer11";
    const repo = "AC-JSONS";
    const branch = "main";
    const path = window.location.pathname.split('/').pop();  // Get folder from URL path

    // Construct URL to list files or folders
    const apiUrl = path 
      ? `https://api.github.com/repos/${user}/${repo}/contents/${path}?ref=${branch}` // Folder
      : `https://api.github.com/repos/${user}/${repo}/contents?ref=${branch}`; // Root

    fetch(apiUrl)
      .then(res => res.json())
      .then(data => {
        const fileList = document.getElementById("file-list");
        fileList.innerHTML = "";

        // Display the parent directory link (if inside a folder)
        if (path) {
          const parentLink = document.createElement("li");
          parentLink.innerHTML = `<a href="../">.. Go up one level</a>`;
          fileList.appendChild(parentLink);
        }

        // Loop through files/folders
        data.forEach(item => {
          if (item.type === "file") {
            const li = document.createElement("li");
            const a = document.createElement("a");
            a.href = item.download_url;
            a.textContent = item.name;
            a.download = item.name; // Forces download when clicked
            li.appendChild(a);
            fileList.appendChild(li);
          } else if (item.type === "dir") {
            // If it's a folder, link to it
            const li = document.createElement("li");
            const a = document.createElement("a");
            a.href = `/${repo}/blob/main/${item.path}/`;  // Link to folder path
            a.textContent = `${item.name}/`; // Folder name
            li.appendChild(a);
            fileList.appendChild(li);
          }
        });
      })
      .catch(err => {
        document.getElementById("file-list").innerText = "Failed to load files üò¢";
        console.error(err);
      });
  </script>
</body>
</html>
